\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb, amsthm, mathtools, algorithm, algorithmic}  
\usepackage{geometry}       
\geometry{margin=1in}   
\usepackage{graphicx}       
\usepackage{tikz}           
\usepackage{enumitem}       
\usepackage[most]{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{macros}
\usepackage[colorlinks=true, allcolors=black]{hyperref}       

% --------------------------------------------------------
% Theorem declarations (must come BEFORE tcolorbox styling!)
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}

% --------------------------------------------------------
\tcbset{
  mythmstyle/.style={
    enhanced,
    breakable,                  % allow page breaks inside long environments
    boxrule=0.6pt,              % thickness of frame
    arc=2pt,                    % rounded corners
    colback=green!10!white,     % default background color
    colframe=white,             % default frame color
    fonttitle=\bfseries,        % title font
    coltitle=black,
    left=6pt,right=6pt,top=6pt,bottom=6pt, % inner padding
    before skip=10pt, after skip=10pt
  }
}

% --------------------------------------------------------
% Apply colors to each environment
\tcolorboxenvironment{theorem}{mythmstyle, colback=red!10!white}
\tcolorboxenvironment{lemma}{mythmstyle, colback=red!10!white}
\tcolorboxenvironment{definition}{mythmstyle, colback=green!10!white}
\tcolorboxenvironment{corollary}{mythmstyle, colback=red!10!white}

% --------------------------------------------------------
% Proof step environment
\newcounter{proofstep}[theorem]
\newenvironment{proofstep}[1][]{
  \refstepcounter{proofstep}%
  \par\noindent\textbf{Step \theproofstep}%
  \if\relax\detokenize{#1}\relax
    \textbf{.}%
  \else
    \ (\textit{#1})\textbf{.}%
  \fi
  \par\nobreak
}{\vspace{0.5em}}

% ---------------------------------------------------------
% step listing environment
\newcounter{stepctr}

\newenvironment{stepscope}{
  \setcounter{stepctr}{0}
}

\newenvironment{step}[1][]{
  \refstepcounter{stepctr}
  \par\noindent\textbf{Step \thestepctr}
  \if\relax\detokenize{#1}\relax
    \textbf{.}%
  \else
    \ (\textit{#1})\textbf{.}%
  \fi
  \par\nobreak
}{\vspace{1em}}